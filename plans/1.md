Perfect! Let’s lay out a **detailed blueprint** for building the MVP of **Dungeon Weaver** (or Echoweaver) with **Phaser + JSON backend**, flexible enough for expansions, and optionally running in a simple HTML frontend. This will cover the **architecture, asset workflow, game loop, and data management**.

---

# **Dungeon Weaver — MVP Blueprint**

## **1. Architecture Overview**

```
Frontend (HTML/Phaser)
  └─ Game Canvas (Phaser Scene)
      ├─ UI Layer (story log, cards, player stats)
      ├─ Map Layer (tiles, rooms, doors)
      └─ Effects Layer (particles, animations)

Backend (Static JSON / Optional API)
  ├─ Heroes JSON
  ├─ Monsters JSON
  ├─ Cards JSON
  ├─ Relics JSON
  ├─ Events JSON
  └─ Dungeon Templates JSON (optional pre-built floor layouts)

Core Engine
  ├─ Dungeon Generator
  ├─ Encounter Resolver (Combat / Event / Trap)
  ├─ Card & Dice Logic
  └─ Story / Log Generator
```

---

## **2. Game Data Design**

### **2.1 Heroes**

```json
{
  "id": "hero_whirling_dancer",
  "name": "Whirling Dancer",
  "stats": { "hp": 40, "energy": 4, "speed": 5 },
  "startingDeck": ["Basic Strike", "Basic Guard", "Whirl Slash"],
  "startingRelics": ["Anklet of Winds"],
  "startingPotions": ["Potion of Gust"],
  "boonEffects": { "onRollTriple": { "energy": 1, "flux": 2 } }
}
```

### **2.2 Cards**

```json
{
  "id": "Whirl Slash",
  "type": "attack",
  "energyCost": 2,
  "diceCost": { "element": "air", "count": 2 },
  "effects": { "damage": 12 },
  "modes": { "charged": { "damage": 18, "cost": 3 } }
}
```

### **2.3 Monsters / Encounters**

```json
{
  "id": "Mirage Jackal",
  "hp": 25,
  "attack": 10,
  "defense": 3,
  "intents": ["Strike", "Prepare"],
  "rewards": { "shards": 20, "cards": ["Whirl Slash"] }
}
```

### **2.4 Relics**

```json
{
  "id": "Sand Whisperer",
  "hook": "onRevealNode",
  "effect": "revealAdjacentRooms"
}
```

### **2.5 Dungeon Tiles / Rooms**

* Each room is a **card object**.

```json
{
  "id": "room_001",
  "type": "combat",
  "revealed": false,
  "cleared": false,
  "connections": ["room_002", "room_003"],
  "encounterId": "Mirage Jackal"
}
```

---

## **3. Game Loop & Core Mechanics**

### **3.1 Main Flow**

1. **Generate Hero**

   * Randomized or chosen.
2. **Generate Dungeon**

   * Grid (3x3 for MVP), each tile is a room-card.
3. **Player Movement**

   * Reveal room upon entering.
4. **Resolve Room**

   * Combat → Use dice & cards
   * Event → Choice → Reward / Consequence
   * Trap → Resolve automatically
   * Loot → Relics, Shards, Cards
5. **Repeat Until Floor Complete**
6. **Boss Encounter**

   * Larger, unique combat room
7. **Advance Floor**

---

### **3.2 Combat Flow**

* Use **3 dice** (1D6) for elemental combos.
* Player **plays cards** using energy & dice.
* Monsters act according to **intents**.
* Combat resolves in **rounds**:

  1. Hero Turn: Roll dice → Choose cards → Resolve damage/defense
  2. Monster Turn: Evaluate intent → Apply damage/effects
* Combat ends when **HP <= 0** or **monsters defeated**.
* Rewards applied post-combat.

---

### **3.3 Dice & Card Mechanics**

* Each card can require dice: `{air: 2, fire: 1}`
* Dice are rolled at the start of turn.
* Player can **reroll** (flux cost) or **use potions**.
* Cards have modes (normal, charged, special).

---

### **3.4 Story Log**

* Continuous scrolling at the bottom.
* Displays:

  * Combat actions
  * Room reveals
  * Event results
  * Dice rolls & card plays
* Acts as **both log and narrative**, no manual scrolling needed.

---

## **4. Visual Design Strategy**

### **4.1 Modular & Scalable**

* Rooms: simple tiles with icons / overlays.
* Cards: template system with base + illustration + text + elemental aura.
* Heroes/Monsters: base sprite + modular “gear” or elemental effect.
* Effects: Phaser particles for attacks, dice, aura.

### **4.2 Minimal Art Approach**

* Tiles: 16x16–32x32 vector/raster sprites.
* Cards: SVG frames + AI-generated art placeholders.
* Animations: tweening & particle effects.
* Future expansions: swap/upgrade assets without redoing base code.

---

## **5. JSON / API Workflow**

1. **Static JSON Files** for MVP (Heroes, Monsters, Cards, Relics, Dungeon Tiles).
2. Optional **API server** later for dynamic content generation.
3. Frontend reads JSON → generates dungeon & encounters on load.
4. Enables:

   * Randomized dungeons
   * Dynamic hero generation
   * Easy content expansion

---

## **6. MVP Scope**

* 1 Hero (randomizable)
* 3x3 Dungeon grid
* 3 dice system
* Basic combat & card mechanics
* 1 boss encounter
* Story log
* Rewards system (Shards, Relics, Cards)

**Optional Features for Later:**

* Modular tiles for larger grids (5x5, 7x7)
* AI-assisted story generation
* Procedural dungeon layouts
* Animated elemental effects

---

If you want, I can **draw a visual blueprint / diagram** showing **how the cards, dice, story log, and dungeon grid interact in Phaser**, so the devs have a **ready-to-implement map for the MVP**. It will be like a “gameboard + UI flow” diagram.

Do you want me to do that next?
